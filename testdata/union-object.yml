- name: union object array
  input: |-
      [
        {
          "age": 56,
          "Birthdate": "July 3, 1962",
          "photo": "https://jsonformatter.org/img/tom-cruise.jpg",
          "weight": 67.5,
          "hasChildren": true,
          "hasGreyHair": false,
          "children": [
            "Suri",
            "Isabella Jane",
            "Connor"
          ]
        },
        {
          "name": "Robert Downey Jr.",
          "Born At": "New York City, NY",
          "photo": "https://jsonformatter.org/img/Robert-Downey-Jr.jpg",
          "wife": "Susan Downey",
          "weight": 77.1,
          "hasChildren": true,
          "children": [
            "Indio Falconer",
            "Avri Roel",
            "Exton Elias"
          ]
        }
      ]
  expected: |-
    []struct {
    	Age         int      `json:"age,omitempty"`
    	Birthdate   string   `json:"Birthdate,omitempty"`
    	Photo       string   `json:"photo"`
    	Weight      float64  `json:"weight"`
    	HasChildren bool     `json:"hasChildren"`
    	HasGreyHair bool     `json:"hasGreyHair,omitempty"`
    	Children    []string `json:"children"`
    	Name        string   `json:"name,omitempty"`
    	BornAt      string   `json:"Born At,omitempty"`
    	Wife        string   `json:"wife,omitempty"`
    }
  unmarshal: |-
    &[{Age:56 Birthdate:July 3, 1962 Photo:https://jsonformatter.org/img/tom-cruise.jpg Weight:67.5 HasChildren:true HasGreyHair:false Children:[Suri Isabella Jane Connor] Name: BornAt: Wife:} {Age:0 Birthdate: Photo:https://jsonformatter.org/img/Robert-Downey-Jr.jpg Weight:77.1 HasChildren:true HasGreyHair:false Children:[Indio Falconer Avri Roel Exton Elias] Name:Robert Downey Jr. BornAt:New York City, NY Wife:Susan Downey}]
- name: union object array include any
  input: |-
      [
        {
          "name": "Tom Cruise",
          "age": 56,
          "Born At": "Syracuse, NY",
          "Birthdate": "July 3, 1962",
          "photo": "https://jsonformatter.org/img/tom-cruise.jpg",
          "wife": null,
          "weight": 67.5,
          "hasChildren": true,
          "hasGreyHair": false,
          "children": [
            "Suri",
            "Isabella Jane",
            "Connor"
          ]
        },
        {
          "name": "Robert Downey Jr.",
          "age": 53,
          "Born At": "New York City, NY",
          "Birthdate": "April 4, 1965",
          "photo": "https://jsonformatter.org/img/Robert-Downey-Jr.jpg",
          "wife": "Susan Downey",
          "weight": 77.1,
          "hasChildren": true,
          "hasGreyHair": false,
          "children": [
            "Indio Falconer",
            "Avri Roel",
            "Exton Elias"
          ]
        }
      ]
  expected: |-
    []struct {
    	Name        string   `json:"name"`
    	Age         int      `json:"age"`
    	BornAt      string   `json:"Born At"`
    	Birthdate   string   `json:"Birthdate"`
    	Photo       string   `json:"photo"`
    	Wife        *string  `json:"wife"`
    	Weight      float64  `json:"weight"`
    	HasChildren bool     `json:"hasChildren"`
    	HasGreyHair bool     `json:"hasGreyHair"`
    	Children    []string `json:"children"`
    }
  unmarshal: skip
- name: union object array include any array
  input: |-
      [
        {
          "name": "Tom Cruise",
          "age": 56,
          "Born At": "Syracuse, NY",
          "Birthdate": "July 3, 1962",
          "photo": "https://jsonformatter.org/img/tom-cruise.jpg",
          "wife": "",
          "weight": 67.5,
          "hasChildren": true,
          "hasGreyHair": false,
          "children": [
            "Suri",
            "Isabella Jane",
            "Connor",
            100
          ]
        },
        {
          "name": "Robert Downey Jr.",
          "age": 53,
          "Born At": "New York City, NY",
          "Birthdate": "April 4, 1965",
          "photo": "https://jsonformatter.org/img/Robert-Downey-Jr.jpg",
          "wife": "Susan Downey",
          "weight": 77.1,
          "hasChildren": true,
          "hasGreyHair": false,
          "children": [
            "Indio Falconer",
            "Avri Roel",
            "Exton Elias"
          ]
        }
      ]
  expected: |-
    []struct {
    	Name        string  `json:"name"`
    	Age         int     `json:"age"`
    	BornAt      string  `json:"Born At"`
    	Birthdate   string  `json:"Birthdate"`
    	Photo       string  `json:"photo"`
    	Wife        string  `json:"wife"`
    	Weight      float64 `json:"weight"`
    	HasChildren bool    `json:"hasChildren"`
    	HasGreyHair bool    `json:"hasGreyHair"`
    	Children    []any   `json:"children"`
    }
  unmarshal: |-
    &[{Name:Tom Cruise Age:56 BornAt:Syracuse, NY Birthdate:July 3, 1962 Photo:https://jsonformatter.org/img/tom-cruise.jpg Wife: Weight:67.5 HasChildren:true HasGreyHair:false Children:[Suri Isabella Jane Connor 100]} {Name:Robert Downey Jr. Age:53 BornAt:New York City, NY Birthdate:April 4, 1965 Photo:https://jsonformatter.org/img/Robert-Downey-Jr.jpg Wife:Susan Downey Weight:77.1 HasChildren:true HasGreyHair:false Children:[Indio Falconer Avri Roel Exton Elias]}]
- name: union object array include different type
  input: |-
      [
        {
          "age": 56,
          "Birthdate": "July 3, 1962",
          "photo": "https://jsonformatter.org/img/tom-cruise.jpg",
          "weight": "67.5",
          "hasChildren": true,
          "hasGreyHair": false,
          "children": [
            "Suri",
            "Isabella Jane",
            "Connor"
          ]
        },
        {
          "name": "Robert Downey Jr.",
          "Born At": "New York City, NY",
          "photo": "https://jsonformatter.org/img/Robert-Downey-Jr.jpg",
          "wife": "Susan Downey",
          "weight": 77.1,
          "hasChildren": true,
          "children": [
            "Indio Falconer",
            "Avri Roel",
            "Exton Elias"
          ]
        }
      ]
  expected: |-
    []struct {
    	Age         int      `json:"age,omitempty"`
    	Birthdate   string   `json:"Birthdate,omitempty"`
    	Photo       string   `json:"photo"`
    	Weight      any      `json:"weight"`
    	HasChildren bool     `json:"hasChildren"`
    	HasGreyHair bool     `json:"hasGreyHair,omitempty"`
    	Children    []string `json:"children"`
    	Name        string   `json:"name,omitempty"`
    	BornAt      string   `json:"Born At,omitempty"`
    	Wife        string   `json:"wife,omitempty"`
    }
  unmarshal: |-
    &[{Age:56 Birthdate:July 3, 1962 Photo:https://jsonformatter.org/img/tom-cruise.jpg Weight:67.5 HasChildren:true HasGreyHair:false Children:[Suri Isabella Jane Connor] Name: BornAt: Wife:} {Age:0 Birthdate: Photo:https://jsonformatter.org/img/Robert-Downey-Jr.jpg Weight:77.1 HasChildren:true HasGreyHair:false Children:[Indio Falconer Avri Roel Exton Elias] Name:Robert Downey Jr. BornAt:New York City, NY Wife:Susan Downey}]
- name: union object array include different type array
  input: |-
      [
        {
          "name": "Tom Cruise",
          "age": 56,
          "Born At": "Syracuse, NY",
          "Birthdate": "July 3, 1962",
          "photo": "https://jsonformatter.org/img/tom-cruise.jpg",
          "wife": "",
          "weight": 67.5,
          "hasChildren": true,
          "hasGreyHair": false,
          "children": [
            100
          ]
        },
        {
          "name": "Robert Downey Jr.",
          "age": 53,
          "Born At": "New York City, NY",
          "Birthdate": "April 4, 1965",
          "photo": "https://jsonformatter.org/img/Robert-Downey-Jr.jpg",
          "wife": "Susan Downey",
          "weight": 77.1,
          "hasChildren": true,
          "hasGreyHair": false,
          "children": [
            "Indio Falconer",
            "Avri Roel",
            "Exton Elias"
          ]
        }
      ]
  expected: |-
    []struct {
    	Name        string  `json:"name"`
    	Age         int     `json:"age"`
    	BornAt      string  `json:"Born At"`
    	Birthdate   string  `json:"Birthdate"`
    	Photo       string  `json:"photo"`
    	Wife        string  `json:"wife"`
    	Weight      float64 `json:"weight"`
    	HasChildren bool    `json:"hasChildren"`
    	HasGreyHair bool    `json:"hasGreyHair"`
    	Children    []any   `json:"children"`
    }
  unmarshal: |-
    &[{Name:Tom Cruise Age:56 BornAt:Syracuse, NY Birthdate:July 3, 1962 Photo:https://jsonformatter.org/img/tom-cruise.jpg Wife: Weight:67.5 HasChildren:true HasGreyHair:false Children:[100]} {Name:Robert Downey Jr. Age:53 BornAt:New York City, NY Birthdate:April 4, 1965 Photo:https://jsonformatter.org/img/Robert-Downey-Jr.jpg Wife:Susan Downey Weight:77.1 HasChildren:true HasGreyHair:false Children:[Indio Falconer Avri Roel Exton Elias]}]
- name: merge object
  input: |-
    [
        {
            "name": "water",
            "boiling_point": {
                "units": "C",
                "value": 100
            }
        },
        {
            "name": "oxygen",
            "type": "gas",
            "density": {
                "units": "g/L",
                "value": 1.429
            }
        }
      ]
  expected: |-
    []struct {
    	Name         string `json:"name"`
    	BoilingPoint struct {
    		Units string `json:"units"`
    		Value int    `json:"value"`
    	} `json:"boiling_point,omitempty"`
    	Type    string `json:"type,omitempty"`
    	Density struct {
    		Units string  `json:"units"`
    		Value float64 `json:"value"`
    	} `json:"density,omitempty"`
    }
  unmarshal: |-
    &[{Name:water BoilingPoint:{Units:C Value:100} Type: Density:{Units: Value:0}} {Name:oxygen BoilingPoint:{Units: Value:0} Type:gas Density:{Units:g/L Value:1.429}}]
- name: merge nested nested object
  input: |-
    [
        {
            "name": "water",
            "boiling_point": {
                "units": "C",
                "colors": [
                  {
                    "name": "red",
                    "alts": {
                      "pink": 1,
                      "cyan": 0
                    }
                  },
                  {
                    "code": "00FF00",
                    "name": "green"
                  }
                ]
            }
        },
        {
            "name": "oxygen",
            "type": "gas",
            "boiling_point": {
                "colors": [
                  {
                    "name": "blue",
                    "code": "0000FF",
                    "alts": {
                      "yellow": 3
                    }
                  }
                ],
                "value": 200
            }
        }
      ]
  expected: |-
    []struct {
    	Name         string `json:"name"`
    	BoilingPoint struct {
    		Units  string `json:"units,omitempty"`
    		Colors []struct {
    			Name string `json:"name"`
    			Alts struct {
    				Pink   int `json:"pink,omitempty"`
    				Cyan   int `json:"cyan,omitempty"`
    				Yellow int `json:"yellow,omitempty"`
    			} `json:"alts"`
    			Code string `json:"code"`
    		} `json:"colors"`
    		Value int `json:"value,omitempty"`
    	} `json:"boiling_point"`
    	Type string `json:"type,omitempty"`
    }
  unmarshal: |-
    &[{Name:water BoilingPoint:{Units:C Colors:[{Name:red Alts:{Pink:1 Cyan:0 Yellow:0} Code:} {Name:green Alts:{Pink:0 Cyan:0 Yellow:0} Code:00FF00}] Value:0} Type:} {Name:oxygen BoilingPoint:{Units: Colors:[{Name:blue Alts:{Pink:0 Cyan:0 Yellow:3} Code:0000FF}] Value:200} Type:gas}]
- name: merge nested nested nested object
  input: |-
    [
        {
            "name": "water",
            "boiling_point": {
                "units": "C",
                "color": {
                  "name": "red",
                  "alt": "pink"
                }
            }
        },
        {
            "name": "oxygen",
            "type": "gas",
            "boiling_point": {
                "color": {
                  "code": "00FF00",
                  "name": "green"
                },
                "value": 200
            }
        }
      ]
  expected: |-
    []struct {
    	Name         string `json:"name"`
    	BoilingPoint struct {
    		Units string `json:"units,omitempty"`
    		Color struct {
    			Name string `json:"name"`
    			Alt  string `json:"alt,omitempty"`
    			Code string `json:"code,omitempty"`
    		} `json:"color"`
    		Value int `json:"value,omitempty"`
    	} `json:"boiling_point"`
    	Type string `json:"type,omitempty"`
    }
  unmarshal: |-
    &[{Name:water BoilingPoint:{Units:C Color:{Name:red Alt:pink Code:} Value:0} Type:} {Name:oxygen BoilingPoint:{Units: Color:{Name:green Alt: Code:00FF00} Value:200} Type:gas}]
- name: merge nested object
  input: |-
    [
        {
            "name": "water",
            "boiling_point": {
                "units": "C",
                "value": 100
            }
        },
        {
            "name": "oxygen",
            "type": "gas",
            "boiling_point": {
                "color": "green",
                "value": 200
            }
        }
      ]
  expected: |-
    []struct {
    	Name         string `json:"name"`
    	BoilingPoint struct {
    		Units string `json:"units,omitempty"`
    		Value int    `json:"value"`
    		Color string `json:"color,omitempty"`
    	} `json:"boiling_point"`
    	Type string `json:"type,omitempty"`
    }
  unmarshal: |-
    &[{Name:water BoilingPoint:{Units:C Value:100 Color:} Type:} {Name:oxygen BoilingPoint:{Units: Value:200 Color:green} Type:gas}]
- name: no merge nested object
  input: |-
    [
        {
            "name": "water",
            "boiling_point": {
                "units": "C",
                "value": 100
            }
        },
        {
            "name": "oxygen",
            "type": "gas",
            "boiling_point": 100
        }
      ]
  expected: |-
    []struct {
    	Name         string `json:"name"`
    	BoilingPoint any    `json:"boiling_point"`
    	Type         string `json:"type,omitempty"`
    }
  unmarshal: |-
    &[{Name:water BoilingPoint:map[units:C value:100] Type:} {Name:oxygen BoilingPoint:100 Type:gas}]
